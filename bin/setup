#!/bin/sh

echo "Updating the system..."
sudo apt update
sudo apt full-upgrade

if ! dpkg -l | grep -q unattended-upgrades; then
  echo "Installing unattended-upgrades..."
  sudo apt install -y unattended-upgrades
fi

if [ -x "$(command -v docker)" ]; then
  echo "Docker is already installed."
else
  echo "Installing Docker..."
  curl -sSL https://get.docker.com | sh

  # Add docker group
  sudo groupadd docker || true
  # Add the current user to the docker group
  sudo usermod -aG docker $USER
  # Activate the new group
  newgrp docker

  # Start the Docker service
  sudo service docker start
fi

docker compose up -d
